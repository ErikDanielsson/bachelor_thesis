---
title: "MCMC visualization"
format:
  html:
    code-fold: true
execute:
  freeze: auto
jupyter: phylogenetics
---


```{python}
# Add the python helper directory to the path

import sys
import os
from pathlib import Path

CWD = Path(os.getcwd())
sys.path.append(str(CWD / "python_helpers/"))

# Import the python helpers
import proc_output

import arviz as az
import xarray as xr
import matplotlib.pyplot as plt

output_dir = CWD / "driftscale_param_sim/output"

df, tppl_fns = proc_output.get_files_in_dir(
    output_dir, {"tppl": proc_output.get_tppl_output_pattern()}
)

df = proc_output.create_inference_data_df(df, proc_output.read_tppl_file, 0, 1)

df_with_compile_params = proc_output.add_compile_params(
    df, output_dir / "compile_id_to_param_comb.csv"
)

reduced_df = proc_output.create_multi_chain_dataset_df(
    df_with_compile_params, ["genid"]
)
print(reduced_df)

az.plot_trace(df_with_compile_params.loc[, "multi_channel"], compact=False)
plt.show()
```
